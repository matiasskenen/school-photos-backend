<div class="card">
  <h1 class="text-3xl font-extrabold text-gray-800 mb-8 text-center">Subir Fotos de Evento</h1>

  <form id="uploadForm">
    <div class="mb-5">
      <!-- Selección de Álbum -->
      <div id="albumSelectionMode">
        <label for="albumSelect" class="block text-gray-700 text-sm font-medium mb-2">Seleccionar Álbum Existente:</label>
        <div class="select-with-clear">
          <button type="button" id="clearAlbumSelection" class="clear-album-selection-btn">
            <i class="fas fa-trash-alt"></i>
          </button>
          <select id="albumSelect" class="input-field mb-2">
            <option value="">Cargando álbumes...</option>
          </select>
        </div>
        <small class="text-gray-500 block mb-4">O crea uno nuevo:</small>
        <button type="button" id="toggleCreateNewAlbumMode" class="btn-secondary mt-2">Crear Nuevo Álbum</button>
      </div>

      <!-- Creación de nuevo Álbum -->
    <div id="albumCreationMode" class="hidden">
      <label for="newAlbumNameInput" class="block text-gray-700 text-sm font-medium mb-2">Nombre del Nuevo Álbum:</label>
      <input type="text" id="newAlbumNameInput" class="input-field" placeholder="Ej: Acto Fin de Año">

      <label for="newAlbumDateInput" class="block text-gray-700 text-sm font-medium mt-3 mb-2">Fecha del Evento:</label>
      <input type="text" id="newAlbumDescriptionInput" class="input-field" placeholder="Opcional">

      <input type="date" id="newAlbumDateInput" class="input-field">

      <label for="newAlbumDescriptionInput" class="block text-gray-700 text-sm font-medium mt-3 mb-2">Descripción / Colegio:</label>
      <input type="text" id="newAlbumDescriptionInput" class="input-field" placeholder="Opcional">

      <div class="flex gap-2 mt-4">
        <button type="button" id="confirmCreateAlbumButton" class="btn-primary flex-grow">Confirmar Creación</button>
        <button type="button" id="cancelCreateAlbumButton" class="btn-secondary flex-grow">Cancelar</button>
      </div>
    </div>
    </div>

    <!-- Subida de fotos -->
    <div class="mb-6">
      <label for="photos" class="block text-gray-700 text-sm font-medium mb-2">Seleccionar Fotos:</label>
      <input type="file" id="photos" multiple accept="image/*" webkitdirectory class="input-field">
      <div class="preview-grid" id="previewContainer"></div>
    </div>

    <button type="submit" id="uploadButton" class="btn-primary flex items-center justify-center">
      <span id="loading-spinner" class="loading-spinner hidden"></span>
      Subir Fotos
    </button>

    <div id="loading" class="text-center mt-4 hidden">
      <span class="loading-spinner"></span> Subiendo fotos... Por favor, espera.
    </div>
    <div id="message" class="message hidden"></div>
  </form>
</div>

<!-- Gestión de Álbumes Existentes -->
<div class="mt-12">
  <h2 class="text-2xl font-bold text-gray-800 mb-6">Álbumes Existentes</h2>
  <button id="reloadAlbums" class="bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded">
    <i class="fas fa-sync-alt mr-1"></i> Recargar
  </button>
  <div id="albumsList" class="space-y-8">
    <p class="text-gray-500">Cargando álbumes...</p>
  </div>
</div>

<!-- Modal Editar Álbum -->
<div id="editAlbumModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
  <div class="bg-white p-6 rounded-lg w-96 shadow-lg">
    <h3 class="text-lg font-bold mb-4">Editar Álbum</h3>
    <label class="block text-sm font-medium text-gray-700">Nombre</label>
    <input type="text" id="editAlbumName" class="input-field mb-3" placeholder="Nombre del álbum">

    <label class="block text-sm font-medium text-gray-700">Fecha del Evento</label>
    <input type="date" id="editAlbumDate" class="input-field mb-3">

    <label class="block text-sm font-medium text-gray-700">Descripción / Colegio</label>
    <input type="text" id="editAlbumDescription" class="input-field mb-3" placeholder="Opcional">

    <div class="flex justify-end gap-2">
      <button id="cancelEditAlbum" class="btn-secondary">Cancelar</button>
      <button id="saveEditAlbum" class="btn-primary">Guardar</button>
    </div>
  </div>
</div>

